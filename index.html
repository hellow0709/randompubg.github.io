<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>PUBG Random Slot</title>

<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    height: 100vh;
    background: #0e0e0e;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Arial, sans-serif;
    color: white;
}

.stage {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.category-title {
    font-size: 40px;
    margin-bottom: 20px;
    font-family: 'Bangers', cursive;
    letter-spacing: 3px;
}

.slot-wrapper {
    width: 360px;
    height: 360px;
    overflow: hidden;
    border-radius: 20px;
    border: 4px solid #ffffff;
    position: relative;
    background: #000;
}

.slot-wrapper.win {
    box-shadow: 0 0 25px rgba(46,204,113,0.4);
    border-color: #2ecc71;
}

.slot {
    position: relative;
}

.item {
    width: 360px;
    height: 360px;
    position: relative;
}

.item img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    background: #111;
}

.item span {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-family: 'Bangers', cursive;
    font-size: 42px;
    color: white;
    text-shadow: 0 0 15px rgba(0,0,0,0.9);
    text-align: center;
    width: 90%;
}

button {
    margin-top: 30px;
    padding: 14px 50px;
    font-size: 30px;
    border: none;
    border-radius: 14px;
    cursor: pointer;
    font-family: 'Bangers', cursive;
}

button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

#spinBtn {
    background: #ffcc00;
    box-shadow: 0 6px 0 #cc9900;
}

#nextBtn {
    background: #2ecc71;
    color: white;
    box-shadow: 0 6px 0 #1e9e52;
    display: none;
}

.result-page {
    display: none;
    flex-direction: column;
    align-items: center;
}

.result-items {
    display: flex;
    gap: 40px;
    margin-top: 20px;
}

.result-item {
    width: 250px;
    height: 250px;
    background: #111;
    border-radius: 15px;
    border: 3px solid white;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}

.result-item img {
    width: 80%;
    height: 80%;
    object-fit: contain;
}

.result-item span {
    margin-top: 10px;
    font-family: 'Bangers', cursive;
    font-size: 28px;
}

#restartBtn {
    margin-top: 40px;
    background: #ff4444;
    color: white;
    box-shadow: 0 6px 0 #aa2222;
}
</style>
</head>

<body>

<div class="stage" id="slotPage">
    <div class="category-title" id="categoryTitle"></div>

    <div class="slot-wrapper" id="wrapper">
        <div class="slot" id="slot"></div>
    </div>

    <button id="spinBtn">SPIN!</button>
    <button id="nextBtn">NEXT!</button>
</div>

<div class="result-page" id="resultPage">
    <h1 style="font-family:'Bangers'; font-size:50px;">RESULT</h1>
    <div class="result-items" id="resultItems"></div>
    <button id="restartBtn">RESTART</button>
</div>

<script>
// Web Audio API ÏÑ§Ï†ï
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function playTick() {
    if(audioCtx.state === 'suspended') audioCtx.resume();
    const osc = audioCtx.createOscillator();
    const gainNode = audioCtx.createGain();
    osc.type = 'square';
    osc.frequency.setValueAtTime(300, audioCtx.currentTime); 
    osc.frequency.exponentialRampToValueAtTime(50, audioCtx.currentTime + 0.03);
    gainNode.gain.setValueAtTime(0.05, audioCtx.currentTime); 
    gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.03);
    osc.connect(gainNode);
    gainNode.connect(audioCtx.destination);
    osc.start();
    osc.stop(audioCtx.currentTime + 0.03);
}

function playWinSound() {
    if(audioCtx.state === 'suspended') audioCtx.resume();
    const osc = audioCtx.createOscillator();
    const gainNode = audioCtx.createGain();
    osc.type = 'sine';
    osc.frequency.setValueAtTime(440, audioCtx.currentTime); 
    osc.frequency.setValueAtTime(554.37, audioCtx.currentTime + 0.1); 
    osc.frequency.setValueAtTime(659.25, audioCtx.currentTime + 0.2); 
    osc.frequency.setValueAtTime(880, audioCtx.currentTime + 0.3); 
    gainNode.gain.setValueAtTime(0.15, audioCtx.currentTime);
    gainNode.gain.setValueAtTime(0.15, audioCtx.currentTime + 0.4);
    gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 1.0);
    osc.connect(gainNode);
    gainNode.connect(audioCtx.destination);
    osc.start();
    osc.stop(audioCtx.currentTime + 1.0);
}

const gunItems = [
    { text: "AR", img: "https://i.namu.wiki/i/FwP5ILuYw6oiSthigPh5FTTI4BKFpnLKfRENskWMXPmWoLtz6XOCPneD14EahoEDkjoyOZAr2GRTEMhDJuOVvgWELjogEaw5BLv3g_iM5k105E3qJQY3FFPubaEPvKF0gxxZc-GwZRMxKrntHvuedA.webp" },
    { text: "SMG", img: "https://i.namu.wiki/i/xHOba-GXKmPFYaB1KW4IjgvefFDBQ3co-UKEYoa20ICqI879xT62UFXYhoxL88QwynP9XY4GaS8X32p2aEEiLEiok38vj7Db-9WsR9allQBPFm4ZtdiD3DZ48a0OFR9z-T5ZyvZNyAZBzYRPrTBy4g.webp" },
    { text: "DMR", img: "https://i.namu.wiki/i/468oVtI34uvBqaazEeastcgbxW0qVPu6YlUZJd84tqiZH977U-WU1dTqZvHxInaGgCCZZigIFgYeeM40rH1bwCUTFTsPjsLfSCMvcOhBtXnonbIMweAwU5u6-jRk3kHRCnDIT2s4dzeiTh6mSsGIfA.webp" },
    { text: "SR", img: "https://i.namu.wiki/i/yVvhQsofVYwq-BRRRyjbPCrI43p6WxugONs9k0PMljMQ1LQE1Pe3LpFi3QqTwSU_RCBm3YpLt0Xyzy7SA1h1DKp32u3C2avou96q8zDJfcBG1ZRJtgtypH0eJpT_ZSeT4FBK86kH1mreNRNP6l0HcQ.webp" },
    { text: "Í∂åÏ¥ù", img: "https://i.namu.wiki/i/CCWvRT6tRl78udkIV-JWpVKxIH-MpCP8Ek_EhMiwi0UZrxkuOR7iOQTSP4vf3Lg5K0PhVnTQcGbGVEiOusK0nsYKnWsxSmrmHd2WhqKl7y2xEEc9H4yDO5XAQx5it9biueTzvn1en7DOHEBqv_NVvQ.webp" },
    { text: "ÏÇ∞ÌÉÑÏ¥ù", img: "https://i.namu.wiki/i/vJrR2AcbLidaZrPHg-aMecF92rx0ICXWu-zwNgnYvwaNRzgFLZtAiOIc142iPtnyNEWhPFvsjgd2V_bGnHu2QYuSVEY7Lbb4L-JZeSeCN5uZVF_kRiSTtxRPLuAUlRIxCWrn9QYzDkUxKBNXK8HQHg.webp" },
];

const ammo = [
    { text: "5.56mm", img: "https://i.namu.wiki/i/N4sqzPPsamXkmdFDATDTsMwCy0Q0b5tWqaU5jTKdv46on1ATsItWz5Z21pkQF-4T2UDXMExHd1Gtn2LmkPmb4KrZrIIzQ_SJdtA4L3zFa4Zl7Bsz1Xen5NI3rIS79AKyXX2jhwkcyuidJn2eNfN-gw.webp" },
    { text: "7.62mm", img: "https://i.namu.wiki/i/BWeOO-Y9IqpPLb4RVOf36QQqdiVBeifrtiR8HS4goLliyyfzlWrQr8zPYaEww-nSe1tY7PDKx1Cb4aGaV-6XU8fxePix2N4MlJ2iLlvU1RExR4-ka1C_j1vEPdhiWHOplsKYMxpIGt9tUJezBJkv-g.webp" },
    { text: "9mm", img: "https://i.namu.wiki/i/kruACDUQP5z_kMaQQiO0poZWp372BKhMatXSu1CXlJvNfoa1xP5mi84x0SNLzF_ijU4XtbJEnIK4mHrfADw7i6oB4P4DXVIyCouU6TuuYa2cz9c9jBaRG3yJjwdnhhYWQ8Y0gQJv2CNV0L7ZY-eD4g.webp" },
    { text: ".45 ACP", img: "https://i.namu.wiki/i/I7QTRbK0C15HW5rP_T6pQVKBqcekdzFmAmbSCnF6fOtSJ7QwB1nkcUlnLlDXziRKgfxweoDURztB61UjfhOf96V6Qo5R3PWDLib9OpnxCVpW4kxQRnbiRG84OmYtFTqlB5LYNx4TOhoJ61GT_DXY8A.webp" },
    { text: "12 Í≤åÏù¥ÏßÄ", img: "https://i.namu.wiki/i/ZFviM2ftxypOUTZ5KacWK4rpAhHepR6Z4WSdfDYSPnAQj7hbaWPdZ2W5OR1O2mvy35HRRlGc0LzZVhvusFpocJyCnlFN6I8v9wVkNwDB27OSUqUXwoA30o6VGPlwSCmT78KQjWNWww-oqG4eXK8WVQ.webp" }
];

    
const healItems = [
    { text: "Î∂ïÎåÄ", img: "https://i.namu.wiki/i/xEcXNBynQmsCsspeL1G61GVGSdVq4WBNymukOp_i2XjacZtlH03qcJKYpL5ezxQPiUStheQ2a3vj9j1mrTI3yH9-N8h_Js2mgwLwqPVhlU5O0QEpQiQ8-fdgQrVnYAhrdGQA8C6XIi4LrzSTDdmqgA.webp" },
    { text: "Íµ¨Í∏âÏÉÅÏûê", img: "https://i.namu.wiki/i/3QJSWAdYQE3REd5K1PnE2l1TlEtC9wJ20ZgTcX482Ai7INGfuDDAkNeSL9FZjiV7E26h6vPEAVrCKYD0ny2_5bG51JbDURI3x6Kae3bwr-zQIx28ZbmcXXF8efUM7NigCWnxN-QS7usrKlEd4PrpGw.webp" },
    { text: "ÏùòÎ£åÏö© ÌÇ§Ìä∏", img: "https://i.namu.wiki/i/q06r8mgc45qLpnVI77gMrKZdeSNvHpN8PFmKorARbLqF1cIkicn6xa8xmOv5pUIQ-EwRcxDUrLEolHln9nqRCv8NHvv1om29O9FTNn8wkJNE_Sw67iYah0nVSRFSkXUulMPWkU_Y9qMgcNkfVSug1g.webp" },
    { text: "ÏóêÎÑàÏßÄ ÎìúÎßÅÌÅ¨", img: "https://i.namu.wiki/i/4Idjgq3mFsyQe9CrgnKkjkaG3IYFgEkpA3Wq6P3WqBD8fTcFy2YOzX2VwQ7BejUaPdyW7Arv8XaXxWURyBGV8GPqPL5iJhszMc8uB5PTfVprgI5R61WZV7tT55p7hrYve-AIh76_HgtDQh3g1ZTa6Q.webp" },
    { text: "ÏßÑÌÜµÏ†ú", img: "https://i.namu.wiki/i/unYzNdulggUeG84tE0efKB03dRvnE612pEmVwOH0nI6qwn-Vq_umCZMHpdFdmgVxpqGrX6Lp1GFMPugXGQUPKtCBqLjpp_J1Bh3Zc4iuNxnxsb_umOafz3Iyi2LY7T7er5JFSs1u36yBFWYRBGOgEw.webp" },
    { text: "Ï£ºÏÇ¨Í∏∞", img: "https://i.namu.wiki/i/2a1RiPycoRjZMzkXn1hAq-hxt-rXS0L_OempfvDLInRjpzhzv6DC2UCisnOW4tSxjR6AxwSSyYVLhxKz-WyuZ_jJjVrmfreEBJjnPaM9VHPeFzI-qesc6OWlLCUiDrTizDG2CRIG8pZIZIdmbI-A3w.webp" }
];

const throwItems = [
    { text: "ÏàòÎ•òÌÉÑ", img: "https://i.namu.wiki/i/clI4qMMZrGlNrtJbpjSnf3mZ4IYmFDXIwI-IDSstCoSNMFcAmNYBiYWVI1JrL-C-6A3p7_UWq1EfxpQNZoIUOFaZYs2GWuv1m-ypcmC-r2h61KkXk-qy5KMIXCYQfLUlQPRejoAwF3Ni9laAZAUVTQ.webp" },
    { text: "ÏÑ¨Í¥ëÌÉÑ", img: "https://i.namu.wiki/i/SR1nDEam-bxW52gCevkGuQd95hc7_HlaX6O-rDunx5GeA9Z61QHEMf4X2qZSIrOhPtczZC7NgpW2WkUFYQmfg3O2vevw7-2IX2JJuG9I8ur--UK3fv0K1MMa7tQKGtZbp_dvieCI-R829sTld7Nj8w.webp" },
    { text: "Ïó∞ÎßâÌÉÑ", img: "https://i.namu.wiki/i/MzddLvJAsgQ3wT8iBmUcDDeF2kZsaN7DkkJb0qgfxo8Vrxvq6zbS_grzjH6ixMJN3bL9AeFPDHVf7corYvyUdHFFSSSsmesq_7DmMWyHg9i8Eh9R3jeDpZooVsauwdaiZVLoKE4jH7GCtbXk5-GWBw.webp" },
    { text: "ÌôîÏóºÎ≥ë", img: "https://i.namu.wiki/i/UD9KLMC7vtMoP_pNZEj-cAqx5Y0WQVQSlOQBEAhvf2MSBmwOOdlTYnsMTwfOgd5hGHuFSdtnsmiTTGfMf5W-BxF9-jvHL3imTIondx7cPS-PxaZzWzlgMCqLQTQdI0OeaxMD0eGY1TdYBJpqKsVpvQ.webp" },
    { text: "Ïó∞Î£åÌÜµ", img: "https://i.namu.wiki/i/OGtaQ9lVTxu9X22I5bF0sh6waIXZKzpE_bqjmkCkcLfO5vzF2Sefc1EEQ7Tquu6AaL07OYB05GSNpmQS4dhyPwRVwc8ogF-s-wkC2ZEMen70JmVuCw82DQ3kxLd3G3zXyQY62Rj-HqbltExNJBC-yQ.webp" },
    { text: "ÌîÑÎùºÏù¥Ìå¨(Ìà¨Ï≤ô)", img: "https://i.namu.wiki/i/u29Ul10gSPTgJNPdFcfqx9CPMOoKn6PhXyv0Y1dUCBJ51AJmQfMpwh8eWAQkFKYtYEzwh5UEYfQJfLQxHN_m0K2TFNlE_jnaTu8M2QDvenMSY8UaP6NBo7zHQKOmiXPLCliG1AWBE66D8poptfHDPw.webp" }
];

const categories = [
{ name:"Ï¥ùÍ∏∞", data:gunItems },
{ name:"ÌÉÑ", data:ammo },
{ name:"ÏùòÎ£åÌÖú(Í∏àÏßÄ)", data:healItems },
{ name:"Ìà¨Ï≤ôÎ¨¥Í∏∞", data:throwItems }
];

let categoryIndex = 0;
let currentData = categories[0].data;
let results = [];

const size = 360;
const loops = 150;
let isSpinning = false;

const slot = document.getElementById("slot");
const wrapper = document.getElementById("wrapper");
const spinBtn = document.getElementById("spinBtn");
const nextBtn = document.getElementById("nextBtn");
const categoryTitle = document.getElementById("categoryTitle");
const resultPage = document.getElementById("resultPage");
const slotPage = document.getElementById("slotPage");
const resultItems = document.getElementById("resultItems");
const restartBtn = document.getElementById("restartBtn");

function createSlot(data){
    slot.innerHTML="";
    
    // üî• 1. Îß® Ï≤òÏùåÏóê ÎùÑÏõåÎëò 'ÏôÑÏ†Ñ ÍπåÎßå Îπà Ïπ∏' Ï∂îÍ∞Ä
    const emptyDiv = document.createElement("div");
    emptyDiv.className = "item";
    emptyDiv.style.background = "#000"; // Í≤ÄÏ†ï Î∞∞Í≤Ω
    slot.appendChild(emptyDiv);

    for(let i=0;i<loops;i++){
        data.forEach(item=>{
            const div=document.createElement("div");
            div.className="item";
            div.innerHTML = `<img src="${item.img}"><span>${item.text}</span>`;
            slot.appendChild(div);
        });
    }
    
    // üî• 2. Îß® ÏúÑÏùò ÍπåÎßå Îπà Ïπ∏(Y: 0)Ïù¥ Î≥¥Ïù¥ÎèÑÎ°ù Ï¥àÍ∏∞Ìôî
    gsap.set(slot, {y: 0});
}

function spin(){
    if(isSpinning) return;
    isSpinning=true;

    const total=currentData.length;
    const targetIndex=Math.floor(Math.random()*total);
    const selected=currentData[targetIndex];

    // üî• 3. YÍ∞Ä 0Ïù∏ ÍπåÎßå ÌôîÎ©¥ÏóêÏÑúÎ∂ÄÌÑ∞ ÏûêÏó∞Ïä§ÎüΩÍ≤å Ï∂úÎ∞úÌïòÎèÑÎ°ù ÏàòÏ†ï
    // Îß® ÏïûÏùò Îπà Ïπ∏(+1)ÏùÑ Í≥†Î†§Ìï¥ÏÑú ÌÉÄÍ≤ü ÏúÑÏπò Í≥ÑÏÇ∞ (ÏïΩ 8Î∞îÌÄ¥ ÎèÑÎäî ÏúÑÏπò)
    const endY = (30 * total + targetIndex + 1) * size; 

    let lastPassedItem = 0;

    gsap.to(slot,{
        y:-endY,
        duration:3,
        ease:"power3.out",
        onUpdate: function() {
            const currentY = Math.abs(gsap.getProperty(slot, "y"));
            const currentItem = Math.floor(currentY / size); 

            if (currentItem > lastPassedItem) {
                playTick();
                lastPassedItem = currentItem;
            }
        },
        onComplete:()=>{
            playWinSound(); 
            wrapper.classList.add("win");
            results[categoryIndex] = selected;
            isSpinning=false;
            nextBtn.style.display="inline-block";
            spinBtn.disabled = true;
        }
    });
}

function goNext(){
    nextBtn.style.display="none";
    wrapper.classList.remove("win");
    spinBtn.disabled = false;

    categoryIndex++;

    if(categoryIndex >= categories.length){
        showFinal();
        return;
    }

    // üî• Ï∂îÍ∞ÄÎêú Ï°∞Í±¥Î∂Ä ÌïÑÌÑ∞ÎßÅ Î°úÏßÅ
    if (categoryIndex === 1) { // 1ÏùÄ 'ÌÉÑ' Ïπ¥ÌÖåÍ≥†Î¶¨ ÏàúÏÑúÏûÖÎãàÎã§.
        const selectedGun = results[0].text; // ÎΩëÌûå Ï¥ùÍ∏∞ Ïù¥Î¶Ñ
        let allowedAmmo = []; // Ïä¨Î°ØÏóê Îì§Ïñ¥Í∞à ÌÉÑÏïΩ Î™©Î°ù
        
        // Ï¥ùÍ∏∞Î≥ÑÎ°ú ÎÇòÏò¨ Ïàò ÏûàÎäî ÌÉÑÏïΩÏùÑ ÏßÄÏ†ïÌï©ÎãàÎã§.
        switch(selectedGun) {
            case "AR": 
                allowedAmmo = ["5.56mm", "7.62mm"]; 
                break;
            case "SMG": 
                allowedAmmo = ["9mm"]; 
                break;
            case "SR": 
                allowedAmmo = [".45 ACP", "7.62mm"]; 
                break;
            case "DMR": 
                allowedAmmo = ["7.62mm", "9mm", "5.56mm"]; 
                break;
            case "Í∂åÏ¥ù": 
                allowedAmmo = ["7.62mm", "9mm", "5.56mm", "12 Í≤åÏù¥ÏßÄ"]; 
                break;
            case "ÏÇ∞ÌÉÑÏ¥ù": 
                allowedAmmo = ["12 Í≤åÏù¥ÏßÄ"]; 
                break;
        }
        
        // Ï†ÑÏ≤¥ ammo Î∞∞Ïó¥ÏóêÏÑú Ï°∞Í±¥Ïóê ÎßûÎäî ÌÉÑÏïΩÎßå Í≥®ÎùºÎÉÖÎãàÎã§.
        currentData = ammo.filter(item => allowedAmmo.includes(item.text));
    } else {
        // ÌÉÑ Ïπ¥ÌÖåÍ≥†Î¶¨Í∞Ä ÏïÑÎãàÎ©¥ ÏõêÎûò ÏÑ§Ï†ïÎêú Îç∞Ïù¥ÌÑ∞Î•º Í∑∏ÎåÄÎ°ú ÏÇ¨Ïö©Ìï©ÎãàÎã§.
        currentData = categories[categoryIndex].data;
    }

    categoryTitle.textContent = categories[categoryIndex].name;
    // ÌïÑÌÑ∞ÎßÅÎêú Îç∞Ïù¥ÌÑ∞Î°ú ÏÉà Ïä¨Î°ØÏùÑ Í∑∏Î¶ΩÎãàÎã§.
    createSlot(currentData);
}

function showFinal(){
    slotPage.style.display="none";
    resultPage.style.display="flex";
    resultItems.innerHTML="";

    results.forEach(item=>{
        const div=document.createElement("div");
        div.className="result-item";
        div.innerHTML = `<img src="${item.img}"><span>${item.text}</span>`;
        resultItems.appendChild(div);
    });
}

function restartGame(){
    results = [];
    categoryIndex = 0;
    currentData = categories[0].data;

    resultItems.innerHTML="";
    resultPage.style.display="none";
    slotPage.style.display="flex";

    categoryTitle.textContent = categories[0].name;
    // Ï≤òÏùåÏúºÎ°ú ÎèåÏïÑÍ∞ÄÎ©¥ Îã§Ïãú ÍπåÎßå ÌôîÎ©¥ ÏÑ∏ÌåÖ
    createSlot(currentData);

    spinBtn.disabled = false;
    nextBtn.style.display="none";
}

categoryTitle.textContent = categories[0].name;
createSlot(currentData);

spinBtn.addEventListener("click",spin);
nextBtn.addEventListener("click",goNext);
restartBtn.addEventListener("click",restartGame);

</script>

</body>
</html>

